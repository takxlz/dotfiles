# dein
## 主な関数
- dein#update()
- dein#clear_state()
- dein#recache_runtimepath()   : deinの挙動がおかしくなったら実行する
- dein#source([{plugins}])     : 引数のプラグインを手動でロードする
- dein#is_sourced([{plugins}]) : 引数のプラグインがロードされているか確認する(loaded:1)
  - g:dein#_plugins['プラグイン名']['sourced']変数を確認してもいい

## toml
- on_ft     = ['foo', 'bar']
- on_cmd    = 'Foo'
- on_event  = 'FooBar'
- on_func   = 'Foo'
- on_map    = '<Plug>(foo)'
- on_source = 'foo'
- on_if     = 'has("foo")'   ※「on_event」と併記する

- hook_add                   : プラグインが追加(認識)されたとき (基本的にプラグインの発火コマンド(on_cmd)をキーマップに割り当てる設定をここに記述する)
- hook_source(lazyのみ)      : プラグインがロードされる直前 (基本的にプラグインのだいたいの設定はここに記述する(発火コマンドのキーマップを記述しても,それ自体が読み込まれていないため読み込めない))
- hook_post_source(lazyのみ) : プラグインがロードされた直後 (読み込んだプラグイン自体の機能を使うときはここに記述する)
- hook_post_update           : プラグインが更新された直後


## 遅延ロードについて
- 自動で遅延ロードプラグインのプラグイン名をプレフィックスとしたコマンドを登録する
- そのコマンドが入力されマッチした場合は,(設定した発火条件でなくても)そのプラグインをロードする
 - vim-minimapなら「minimap」,vim-cheatsheetなら「cheatsheet」がコマンドとして自動登録される
  - 「:Minimap」を実行した場合,vim-minimapはMinimapコマンドがあるため自動登録したコマンドにマッチし,ロードされる
  - 「:Cheat」を実行した場合,vim-cheatsheetはCheatsheetがコマンド名として自動登録されているのでマッチせずに,ロードされない
 > dein の機能として、プラグインのコマンドのプレフィクスを自動認識する機能があり、プレフィクスにマッチしたコマンドは自動的にロードできるからです。
 > ただし自動認識は完璧ではありません。
 > プレフィクスはプラグイン名から計算されるので、
 > 例えば vim-minimap なら minimap、vim-cheatsheet なら cheatsheet になります。
 > Minimap には minimap のプレフィクスがマッチしますが Cheat と cheatsheet はマッチしないのでロードできないのです。


# tips
## コマンドをファイル出力する
```
:redir! > filename
:echo 'aaa'
:redir end
```
- 「!」で新規ファイル
- 「>>」で追記



# vim script
## 変数
  - let s:foo = 0

## スコープ
- s:foo : スクリプトローカル
- g:foo : グローバル
- b:foo : バッファローカル
- v:foo : vimが定義する変数（ユーザには関係ない）
- l:foo : 関数ローカル
- 省略  : 関数外ではグローバル，関数内では関数ローカル

## ファイルパス
- %       : カレントファイル名（「%:t」と同じ）
- %:p     : カレントフルパス
- %:r     : 拡張子抜きのカレントファイル名
- %:e     : カレントファイルの拡張子
- %:h     : カレントファイルのディレクトリのパス
- <sfile> : 実行中のvimスクリプトのパス

## よく使う関数
- expand(path)
  - 引数のパス(「~/」など)をフルパスに展開する

## 関数の提供方法
- 特になにもしない(:callで呼び出す)
- コマンドに登録する(:foo)
- キーマップに登録する



